<div class="surveyanswers">
    <div class="questions">
        <tal:group tal:repeat="group view/all_questions">
            <div class="inner_questions" id='123' tal:attributes="id string:surveyanswers_groupquestions_${repeat/group/number}">
                <ul>
                    <li tal:repeat="question group/questions">
                	    <a href="" tal:content="question/text" tal:attributes="href string:${here/absolute_url}/${question/question_id}">Country</a>
            	   	</li>
                </ul>
            </div>
        </tal:group>
    </div>
   	<tal:group tal:repeat="group view/all_questions">
        <h4 class="title" href="#" id="123" tal:attributes="id string:surveyanswers_groupname_${repeat/group/number}"><tal:span tal:replace="group/name">Name</tal:span> (<tal:span tal:replace="group/count">4</tal:span>)</h4>
    </tal:group>
</div>
<script type="text/javascript">
jq(document).ready(function(){
    surveyanswers_active = 0;
    jq('.surveyanswers div.inner_questions').hide();
    jq('.surveyanswers h4.title').click(function() {
        var new_id = '#surveyanswers_groupquestions_' + this.id.split('_')[2]
        var state = 'change';
        if (new_id == surveyanswers_active){
            state = 'off';
        }
        if (surveyanswers_active == 0){
            state = 'new';
        }
        if (state == 'change'){
            jq(surveyanswers_active).toggle('slow', function(){
                jq(new_id).toggle('slow', function(){
                    surveyanswers_active = new_id;
                });
            });
        }

        if (state == 'new'){
            jq(new_id).toggle('slow', function(){
                surveyanswers_active = new_id;
            });
        }

        if (state == 'off'){
            jq(new_id).toggle('slow', function(){
                surveyanswers_active = 0;
            });
        }
    });
});
</script>
